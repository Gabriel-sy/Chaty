<main>
  <div class="content-wrapper">
    <div class="side-bar">
      <h2>Chats</h2>
      <div class="chat-search-wrapper">
        <svg class="chat-search-icon" xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#F44336"><path d="M784-120 532-372q-30 24-69 38t-83 14q-109 0-184.5-75.5T120-580q0-109 75.5-184.5T380-840q109 0 184.5 75.5T640-580q0 44-14 83t-38 69l252 252-56 56ZM380-400q75 0 127.5-52.5T560-580q0-75-52.5-127.5T380-760q-75 0-127.5 52.5T200-580q0 75 52.5 127.5T380-400Z"/></svg>        <input class="chat-search" type="text" placeholder="Pesquise pelo nome de um chat...">
      </div>
      <div class="chats-container">
        <div class="chat-preview" *ngFor="let chat of userChats$ | async">
          <div class="chat-img-box">
            <img src="Default-Profile.webp" alt="Default picture">
          </div>
          <div class="texts-wrapper">
            <p class="chat-username">{{ chat.UserName }}</p>
            <p class="last-message">Ultima mensagefwefwefwwfefwefwefwe</p>
          </div>
          <p class="notification-amount">1</p>
        </div>
      </div>
    </div>
    <div class="main">
      <div class="nav-bar">
        <div class="search-wrapper">
          <svg class="search-icon" xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#F44336"><path d="M784-120 532-372q-30 24-69 38t-83 14q-109 0-184.5-75.5T120-580q0-109 75.5-184.5T380-840q109 0 184.5 75.5T640-580q0 44-14 83t-38 69l252 252-56 56ZM380-400q75 0 127.5-52.5T560-580q0-75-52.5-127.5T380-760q-75 0-127.5 52.5T200-580q0 75 52.5 127.5T380-400Z"/></svg>
          <input class="user-search" type="text" placeholder="Pesquisar por um usuário..." (input)="onSearchInput($event)">
          <div class="results-box" *ngIf="searchResults.length > 0">
            <div class="result" *ngFor="let user of searchResults">
              <div class="result-img-box">
                <img src="Default-Profile.webp" alt="Foto de perfil">
              </div>
              <p>{{ user.userName }}</p>
              <button (click)="sendChatRequest(user)" *ngIf="!user.isSent">
                <span *ngIf="!user.isLoading && !user.isSent">Solicitar chat</span>
                <span *ngIf="user.isLoading" class="spinner"></span>
                
              </button>
              <span *ngIf="user.isSent" class="disabled">Enviado</span>
            </div>
          </div>
          <!-- <div class="no-results" *ngIf="searchResults.length === 0 && userSearch.value">
            Nenhum usuário encontrado
          </div> -->
        </div>
        <div class="menu-items">
          <div class="notifications-wrapper">
            <div class="notification-icon">
              <svg xmlns="http://www.w3.org/2000/svg" height="50px" viewBox="0 -960 960 960" width="50px" fill="#E0E0E0">
                <path d="M160-200v-80h80v-280q0-83 50-147.5T420-792v-28q0-25 17.5-42.5T480-880q25 0 42.5 17.5T540-820v28q80 20 130 84.5T720-560v280h80v80H160Zm320-300Zm0 420q-33 0-56.5-23.5T400-160h160q0 33-23.5 56.5T480-80ZM320-280h320v-280q0-66-47-113t-113-47q-66 0-113 47t-47 113v280Z"/>
              </svg>
              <span class="notification-badge">3</span>
            </div>
            
            <div class="notifications-box">
              <div class="notifications-header">
                <h3>Notificações</h3>
                <button class="clear-all">Limpar todas</button>
              </div>
          
              <div class="notification-item">
                <div class="notification-content">
                  <div class="notification-avatar">
                    <img src="Default-Profile.webp" alt="Foto de perfil">
                  </div>
                  <div>
                    <p class="notification-text">João Silva te enviou uma solicitação de chat</p>
                    <span class="notification-time">há 5 minutos</span>
                  </div>
                </div>
                <div class="notification-actions">
                  <button class="action-button accept-button">Aceitar</button>
                  <button class="action-button reject-button">Recusar</button>
                </div>
              </div>

              <div class="notification-item">
                <div class="notification-content">
                  <div class="notification-avatar">
                    <img src="Default-Profile.webp" alt="Foto de perfil">
                  </div>
                  <div>
                    <p class="notification-text">João Silva te enviou uma solicitação de chat</p>
                    <span class="notification-time">há 5 minutos</span>
                  </div>
                </div>
                <div class="notification-actions">
                  <button class="action-button accept-button">Aceitar</button>
                  <button class="action-button reject-button">Recusar</button>
                </div>
              </div>

              <div class="notification-item">
                <div class="notification-content">
                  <div class="notification-avatar">
                    <img src="Default-Profile.webp" alt="Foto de perfil">
                  </div>
                  <div>
                    <p class="notification-text">João Silva te enviou uma solicitação de chat</p>
                    <span class="notification-time">há 5 minutos</span>
                  </div>
                </div>
                <div class="notification-actions">
                  <button class="action-button accept-button">Aceitar</button>
                  <button class="action-button reject-button">Recusar</button>
                </div>
              </div>
          
              <div class="empty-notifications">
                <p>Nenhuma notificação no momento</p>
              </div>
            </div>
          </div>
          <div class="profile-img-box">
            <img src="Default-Profile.webp" alt="Default picture">
          </div>
        </div>
        
      </div>
      <div class="chat">
        <app-chat></app-chat>
      </div>
      <!-- <h1>Clique em chat ou comece um novo</h1> -->
    </div>
  </div>
</main>